[gd_scene load_steps=18 format=3 uid="uid://4k367eet2b6l"]

[ext_resource type="Script" uid="uid://c0p3pei51lvda" path="res://Scripts/player.gd" id="1_v0iea"]
[ext_resource type="Script" uid="uid://2to7u04sdlp5" path="res://Scripts/camera_rig.gd" id="2_6t5aa"]
[ext_resource type="PackedScene" uid="uid://d2uuxg05wsjxm" path="res://Meshes/hero_male.glb" id="2_cvnsp"]
[ext_resource type="Script" uid="uid://c3odt7hoqvwpr" path="res://Scripts/foot_stepper.gd" id="4_vgqql"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_yp4wr"]

[sub_resource type="SphereShape3D" id="SphereShape3D_6t5aa"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6t5aa"]
animation = &"freehand_walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_vgqql"]
animation = &"freehand_run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_x3wgy"]
animation = &"pose_lean_left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_3smsa"]
animation = &"pose_lean_right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_fkybt"]
animation = &"freehand_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8erm5"]
animation = &"freehand_fall"

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_x3wgy"]
xfade_time = 0.2
input_0/name = "idle"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "walk"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true
input_2/name = "run"
input_2/auto_advance = false
input_2/break_loop_at_end = false
input_2/reset = true
input_3/name = "fall"
input_3/auto_advance = false
input_3/break_loop_at_end = false
input_3/reset = true

[sub_resource type="AnimationNodeAdd3" id="AnimationNodeAdd3_8erm5"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_6t5aa"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_3smsa"]
nodes/Animation/node = SubResource("AnimationNodeAnimation_fkybt")
nodes/Animation/position = Vector2(200, 80)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_6t5aa")
"nodes/Animation 2/position" = Vector2(200, 340)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_vgqql")
"nodes/Animation 3/position" = Vector2(200, 600)
"nodes/Animation 4/node" = SubResource("AnimationNodeAnimation_x3wgy")
"nodes/Animation 4/position" = Vector2(200, 860)
"nodes/Animation 5/node" = SubResource("AnimationNodeAnimation_3smsa")
"nodes/Animation 5/position" = Vector2(200, 1120)
nodes/Animation6/node = SubResource("AnimationNodeAnimation_8erm5")
nodes/Animation6/position = Vector2(200, 1380)
nodes/movement/node = SubResource("AnimationNodeTransition_x3wgy")
nodes/movement/position = Vector2(700, 240)
nodes/output/position = Vector2(920, 240)
nodes/run_lean/node = SubResource("AnimationNodeAdd3_8erm5")
nodes/run_lean/position = Vector2(460, 820)
nodes/walk_speed/node = SubResource("AnimationNodeTimeScale_6t5aa")
nodes/walk_speed/position = Vector2(460, 300)
node_connections = [&"movement", 0, &"Animation", &"movement", 1, &"walk_speed", &"movement", 2, &"run_lean", &"movement", 3, &"Animation6", &"output", 0, &"movement", &"run_lean", 0, &"Animation 4", &"run_lean", 1, &"Animation 3", &"run_lean", 2, &"Animation 5", &"walk_speed", 0, &"Animation 2"]

[sub_resource type="AudioStreamPolyphonic" id="AudioStreamPolyphonic_6t5aa"]

[node name="Player" type="CharacterBody3D"]
floor_snap_length = 0.25
script = ExtResource("1_v0iea")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.937657, 0)
shape = SubResource("CapsuleShape3D_yp4wr")

[node name="CameraRig" type="SpringArm3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
top_level = true
shape = SubResource("SphereShape3D_6t5aa")
spring_length = 3.0
margin = 0.6
script = ExtResource("2_6t5aa")

[node name="Camera3D" type="Camera3D" parent="CameraRig"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.823916)

[node name="Mesh" parent="." instance=ExtResource("2_cvnsp")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0.00513887, 0, -0.000237465)

[node name="Skeleton3D" parent="Mesh/HeroRig_export" index="0"]
bones/0/position = Vector3(0.00399466, 1.12687, 0.11071)
bones/0/rotation = Quaternion(1, 5.05692e-15, 1.06581e-14, 6.16095e-08)
bones/1/rotation = Quaternion(0.759218, 0.0017026, -0.00109924, 0.650833)
bones/2/rotation = Quaternion(-0.61417, -0.0330705, 0.0321221, 0.787826)
bones/3/rotation = Quaternion(0.0326237, -0.00419574, 0.00273245, 0.999455)
bones/4/rotation = Quaternion(-0.189916, 0.0369853, 0.0211949, 0.980874)
bones/5/rotation = Quaternion(-0.916786, 0.0705397, 0.00751381, 0.393029)
bones/6/rotation = Quaternion(0.809291, 0.00244946, -0.0677836, 0.583479)
bones/7/rotation = Quaternion(-0.0937702, 0.0227534, -0.0123079, 0.995258)
bones/8/rotation = Quaternion(0.97298, 0.00383426, -0.0455411, -0.22632)
bones/9/rotation = Quaternion(-0.0644629, 2.82454e-07, -5.58082e-09, 0.99792)
bones/10/rotation = Quaternion(-0.807157, 0.036507, 0.0243329, 0.588704)
bones/11/rotation = Quaternion(0.946105, 0.303931, 0.0535817, -0.0981832)
bones/12/rotation = Quaternion(-0.336903, 0.00669031, -0.0269676, 0.941129)
bones/13/rotation = Quaternion(-0.100302, -0.198335, 0.167826, 0.960436)
bones/14/rotation = Quaternion(-0.434575, 0.895009, -0.0717361, 0.070404)
bones/15/rotation = Quaternion(-0.172143, 0.721074, 0.191825, 0.643135)
bones/16/rotation = Quaternion(-0.21767, -0.000106906, 0.00037531, 0.976022)
bones/17/rotation = Quaternion(-0.18079, -1.12149e-06, -2.85453e-07, 0.983522)
bones/18/rotation = Quaternion(-2.25199e-07, -0.104994, -2.09334e-06, 0.994473)
bones/19/rotation = Quaternion(0.720689, -0.692637, -0.0135034, -0.0260835)
bones/20/rotation = Quaternion(0.915783, -0.340703, -0.161819, -0.138122)
bones/21/rotation = Quaternion(-0.283448, -0.00681583, 0.0226889, 0.958695)
bones/22/rotation = Quaternion(-0.284252, 0.249127, 0.00812141, 0.925781)
bones/24/rotation = Quaternion(0.434575, 0.895009, -0.071736, -0.0704038)
bones/25/rotation = Quaternion(-0.172143, -0.721073, -0.191825, 0.643135)
bones/26/rotation = Quaternion(-0.21767, 0.000106799, -0.000375327, 0.976022)
bones/27/rotation = Quaternion(-0.18079, 1.18968e-06, 3.97563e-07, 0.983522)
bones/28/rotation = Quaternion(-4.37699e-07, 0.171617, 2.1451e-06, 0.985164)
bones/29/rotation = Quaternion(0.999716, 5.65719e-09, -6.39324e-08, 0.0238422)
bones/29/scale = Vector3(1, 1, 1)

[node name="AnimationPlayer" parent="Mesh" index="1"]
autoplay = "freehand_idle"

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Mesh")
tree_root = SubResource("AnimationNodeBlendTree_3smsa")
anim_player = NodePath("../Mesh/AnimationPlayer")
parameters/movement/current_state = "fall"
parameters/movement/transition_request = ""
parameters/movement/current_index = 3
parameters/run_lean/add_amount = 0.0
parameters/walk_speed/scale = 1.53

[node name="Footsteps" type="AudioStreamPlayer3D" parent="."]
stream = SubResource("AudioStreamPolyphonic_6t5aa")
bus = &"SoundFX"
script = ExtResource("4_vgqql")

[editable path="Mesh"]
