[gd_scene load_steps=18 format=3 uid="uid://4k367eet2b6l"]

[ext_resource type="Script" uid="uid://c0p3pei51lvda" path="res://Scripts/player/player.gd" id="1_v0iea"]
[ext_resource type="Script" uid="uid://2to7u04sdlp5" path="res://Scripts/camera_rig.gd" id="2_6t5aa"]
[ext_resource type="PackedScene" uid="uid://d2uuxg05wsjxm" path="res://Meshes/hero_male.glb" id="2_cvnsp"]
[ext_resource type="Script" uid="uid://c3odt7hoqvwpr" path="res://Scripts/foot_stepper.gd" id="4_vgqql"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_yp4wr"]

[sub_resource type="SphereShape3D" id="SphereShape3D_6t5aa"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6t5aa"]
animation = &"freehand_walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_vgqql"]
animation = &"freehand_run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_x3wgy"]
animation = &"pose_lean_left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_3smsa"]
animation = &"pose_lean_right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_fkybt"]
animation = &"freehand_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8erm5"]
animation = &"freehand_fall"

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_x3wgy"]
xfade_time = 0.2
input_0/name = "idle"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "walk"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true
input_2/name = "run"
input_2/auto_advance = false
input_2/break_loop_at_end = false
input_2/reset = true
input_3/name = "fall"
input_3/auto_advance = false
input_3/break_loop_at_end = false
input_3/reset = true

[sub_resource type="AnimationNodeAdd3" id="AnimationNodeAdd3_8erm5"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_6t5aa"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_3smsa"]
nodes/output/position = Vector2(920, 240)
nodes/Animation/node = SubResource("AnimationNodeAnimation_fkybt")
nodes/Animation/position = Vector2(200, 80)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_6t5aa")
"nodes/Animation 2/position" = Vector2(200, 340)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_vgqql")
"nodes/Animation 3/position" = Vector2(200, 600)
"nodes/Animation 4/node" = SubResource("AnimationNodeAnimation_x3wgy")
"nodes/Animation 4/position" = Vector2(200, 860)
"nodes/Animation 5/node" = SubResource("AnimationNodeAnimation_3smsa")
"nodes/Animation 5/position" = Vector2(200, 1120)
nodes/Animation6/node = SubResource("AnimationNodeAnimation_8erm5")
nodes/Animation6/position = Vector2(200, 1380)
nodes/movement/node = SubResource("AnimationNodeTransition_x3wgy")
nodes/movement/position = Vector2(700, 240)
nodes/run_lean/node = SubResource("AnimationNodeAdd3_8erm5")
nodes/run_lean/position = Vector2(460, 820)
nodes/walk_speed/node = SubResource("AnimationNodeTimeScale_6t5aa")
nodes/walk_speed/position = Vector2(460, 300)
node_connections = [&"output", 0, &"movement", &"movement", 0, &"Animation", &"movement", 1, &"walk_speed", &"movement", 2, &"run_lean", &"movement", 3, &"Animation6", &"run_lean", 0, &"Animation 4", &"run_lean", 1, &"Animation 3", &"run_lean", 2, &"Animation 5", &"walk_speed", 0, &"Animation 2"]

[sub_resource type="AudioStreamPolyphonic" id="AudioStreamPolyphonic_6t5aa"]

[node name="Player" type="CharacterBody3D"]
floor_snap_length = 0.25
script = ExtResource("1_v0iea")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.937657, 0)
shape = SubResource("CapsuleShape3D_yp4wr")

[node name="CameraRig" type="SpringArm3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
top_level = true
shape = SubResource("SphereShape3D_6t5aa")
spring_length = 3.0
margin = 0.6
script = ExtResource("2_6t5aa")

[node name="Camera3D" type="Camera3D" parent="CameraRig"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.823916)

[node name="Mesh" parent="." instance=ExtResource("2_cvnsp")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0.00513887, 0, -0.000237465)

[node name="Skeleton3D" parent="Mesh/HeroRig_export" index="0"]
bones/0/position = Vector3(-0.027448077, 1.1350261, -0.010971137)
bones/0/rotation = Quaternion(0.9997189, -0.0071347067, 0.004840653, 0.022089895)
bones/1/rotation = Quaternion(0.7071068, -5.2414932e-23, -1.4705806e-22, 0.7071068)
bones/2/rotation = Quaternion(-0.82787627, -0.012186354, -0.16293354, 0.5365864)
bones/3/rotation = Quaternion(0.88402903, -0.0019375084, 0.07404343, 0.4615263)
bones/4/rotation = Quaternion(-0.11158178, 0.13268994, 0.22976297, 0.9576805)
bones/5/rotation = Quaternion(-0.85489553, -0.017918231, 0.056340914, 0.51542056)
bones/6/rotation = Quaternion(0.50587666, 0.0036168513, -0.042370602, 0.86155707)
bones/7/rotation = Quaternion(0.29983482, -0.06410489, -0.12455711, 0.94365)
bones/8/rotation = Quaternion(0.99971575, 1.6203014e-10, -1.6202642e-10, -0.023842977)
bones/9/rotation = Quaternion(-0.06731072, 0.044110876, -0.01623621, 0.99662435)
bones/10/rotation = Quaternion(-0.4942707, -0.031097844, -0.019044857, 0.86854285)
bones/11/rotation = Quaternion(0.58427125, 0.80230665, -0.0995833, -0.07081201)
bones/12/rotation = Quaternion(-0.35734987, 0.006636038, -0.028604364, 0.93350893)
bones/13/rotation = Quaternion(0.0372668, -0.071101084, 0.13357358, 0.98778236)
bones/14/rotation = Quaternion(-0.43457532, 0.8950093, -0.07173616, 0.070403926)
bones/15/rotation = Quaternion(-0.17214309, 0.7210735, 0.19182459, 0.64313537)
bones/16/rotation = Quaternion(-0.21766959, -0.00010695778, 0.00037530164, 0.9760225)
bones/17/rotation = Quaternion(-0.18079044, -1.07698e-06, -1.9688618e-07, 0.98352164)
bones/18/rotation = Quaternion(-1.2044311e-08, -0.0041557862, -2.118679e-06, 0.99999136)
bones/19/rotation = Quaternion(0.7206885, -0.6926366, -0.013503364, -0.026083529)
bones/20/rotation = Quaternion(0.6439726, -0.68884724, 0.16499232, -0.28907865)
bones/21/rotation = Quaternion(-0.48595732, -0.0062068906, 0.038898934, 0.87309444)
bones/22/rotation = Quaternion(0.07550111, 0.055658203, 0.045218725, 0.99456376)
bones/24/rotation = Quaternion(0.43457532, 0.8950093, -0.07173598, -0.07040382)
bones/25/rotation = Quaternion(-0.17214316, -0.7210734, -0.19182463, 0.6431355)
bones/26/rotation = Quaternion(-0.21766958, 0.00010680168, -0.00037534404, 0.9760224)
bones/27/rotation = Quaternion(-0.18079048, 1.070362e-06, 2.3895313e-07, 0.98352164)
bones/28/rotation = Quaternion(-2.7752352e-08, -0.012043237, 2.1714475e-06, 0.9999275)
bones/29/rotation = Quaternion(0.9994061, -0.00896373, -0.021611877, 0.025302013)
bones/29/scale = Vector3(1, 0.9999997, 1.000001)

[node name="AnimationPlayer" parent="Mesh" index="1"]
autoplay = "freehand_idle"

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Mesh")
tree_root = SubResource("AnimationNodeBlendTree_3smsa")
anim_player = NodePath("../Mesh/AnimationPlayer")
parameters/movement/current_state = "fall"
parameters/movement/transition_request = ""
parameters/movement/current_index = 3
parameters/run_lean/add_amount = 0.0
parameters/walk_speed/scale = 1.53

[node name="Footsteps" type="AudioStreamPlayer3D" parent="."]
stream = SubResource("AudioStreamPolyphonic_6t5aa")
bus = &"SoundFX"
script = ExtResource("4_vgqql")

[editable path="Mesh"]
